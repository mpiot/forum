{% extends 'base.html.twig' %}

{% block title %}Search{% endblock %}

{% block breadcrumb %}
    {{ parent() }}
    <li class="breadcrumb-item active">Search</li>
{% endblock %}

{% block body %}
    {{ form_start(form) }}
        {{ form_row(form.query) }}

        <button class="btn">{{ button_label|default('Search') }}</button>
    {{ form_end(form) }}

    {% if results is not null %}
        <div class="results mt-3">
            {% for result in results['hits'] %}
                <h5><a href="{{ path('thread_show', { 'categorySlug': result.categorySlug, 'id': result.objectID, 'slug': result.slug }) }}">{{ result['_highlightResult']['subject']['value']|raw }}</a></h5>
                <p>
                    {% for post in result['_highlightResult']['posts'] %}
                        {% if 'full' == post['matchLevel'] %}
                            {{ post['value']|raw }} {{ not loop.last ? '... ' }}
                        {% endif %}
                    {% endfor %}
                </p>
            {% else %}
                <p>There is no results.</p>
            {% endfor %}
        </div>
    {% endif %}
{% endblock %}
